<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Boßeln Scoreboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      margin-bottom: 10px;
    }
    .team-header {
      color: #fff;
      padding: 10px;
      margin-bottom: 5px;
    }
    .red {
      background-color: red;
    }
    .green {
      background-color: green;
    }
    table {
      border-collapse: collapse;
      margin-bottom: 15px;
      width: 100%;
      max-width: 900px;
    }
    th, td {
      border: 1px solid #000;
      padding: 5px;
      text-align: center;
    }
    input[type="text"] {
      width: 100px;
    }
    input[type="number"] {
      width: 60px;
    }
    .score-area {
      margin: 10px 0;
      font-size: 1.1em;
    }
    #genderSelect {
      margin-left: 10px;
      margin-right: 10px;
    }
    .table-container {
      overflow-x: auto;
    }
  </style>
</head>
<body>

<h1>Boßeln Scoreboard</h1>

<!-- Geschlechtsauswahl und Reset -->
<div>
  <label for="genderSelect">Geschlecht:</label>
  <select id="genderSelect">
    <option value="men">Männer</option>
    <option value="women">Frauen</option>
  </select>
  <button id="resetBtn">RESET</button>
</div>

<br>

<!-- Oberes Team (Führung) -->
<div id="topTeam" class="team-header red">
  <button id="topTeamToggleBtn">Führung</button>
  <input type="text" id="topVerein" placeholder="Verein eintragen..." />
  <button id="topSchoetBtn">Schöööööt!</button>
  &nbsp;Schoet: <span id="topSchoetDisplay">0</span>
  &nbsp;Meter: <input type="number" id="topMeterInput" value="0" />
</div>

<!-- Tabelle mit Runden, Werfern, Checkboxen -->
<div class="table-container">
  <table>
    <thead>
      <tr>
        <th>Runden</th>
        <th>1</th><th>2</th><th>3</th><th>4</th><th>5</th>
        <th>6</th><th>7</th><th>8</th><th>9</th><th>10</th>
        <th>11</th><th>12</th><th>13</th><th>14</th><th>15</th>
      </tr>
    </thead>
    <tbody>
      <!-- Oberes Team: Werfer 1-4 + Ersatz 1 -->
      <tr>
        <td><input type="text" placeholder="Werfer 1" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td>
      </tr>
      <tr>
        <td><input type="text" placeholder="Werfer 2" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td>
      </tr>
      <tr>
        <td><input type="text" placeholder="Werfer 3" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td>
      </tr>
      <tr>
        <td><input type="text" placeholder="Werfer 4" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td>
      </tr>
      <tr>
        <td><input type="text" placeholder="Ersatz 1" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td>
      </tr>

      <!-- Unteres Team: Werfer 1-4 + Ersatz 1 -->
      <tr>
        <td><input type="text" placeholder="Werfer 1" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td>
      </tr>
      <tr>
        <td><input type="text" placeholder="Werfer 2" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td>
      </tr>
      <tr>
        <td><input type="text" placeholder="Werfer 3" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td>
      </tr>
      <tr>
        <td><input type="text" placeholder="Werfer 4" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td>
      </tr>
      <tr>
        <td><input type="text" placeholder="Ersatz 1" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td><td><input type="checkbox" /></td>
        <td><input type="checkbox" /></td>
      </tr>
    </tbody>
  </table>
</div>

<!-- Unteres Team (Führung) -->
<div id="bottomTeam" class="team-header green">
  <button id="bottomTeamToggleBtn">Führung</button>
  <input type="text" id="bottomVerein" placeholder="Verein eintragen..." />
  <button id="bottomSchoetBtn">Schöööööt!</button>
  &nbsp;Schoet: <span id="bottomSchoetDisplay">0</span>
  &nbsp;Meter: <input type="number" id="bottomMeterInput" value="0" />
</div>

<!-- Ergebnis-Anzeige -->
<div class="score-area">
  <strong>Ergebnis Schoet:</strong> <span id="ergebnisSchoet">0.0</span><br />
  <strong>Ergebnis Meter:</strong> <span id="ergebnisMeter">0</span>
</div>

<script>
  // Element-Referenzen
  const topTeam = document.getElementById("topTeam");
  const bottomTeam = document.getElementById("bottomTeam");

  const topTeamToggleBtn = document.getElementById("topTeamToggleBtn");
  const bottomTeamToggleBtn = document.getElementById("bottomTeamToggleBtn");

  const topSchoetBtn = document.getElementById("topSchoetBtn");
  const bottomSchoetBtn = document.getElementById("bottomSchoetBtn");

  const topSchoetDisplay = document.getElementById("topSchoetDisplay");
  const bottomSchoetDisplay = document.getElementById("bottomSchoetDisplay");

  const topMeterInput = document.getElementById("topMeterInput");
  const bottomMeterInput = document.getElementById("bottomMeterInput");

  const ergebnisSchoet = document.getElementById("ergebnisSchoet");
  const ergebnisMeter = document.getElementById("ergebnisMeter");

  const genderSelect = document.getElementById("genderSelect");
  const resetBtn = document.getElementById("resetBtn");

  // Globale Variablen für Schoet
  let topSchoet = 0;
  let bottomSchoet = 0;

  // Farb-Umschaltung ("Führung")
  topTeamToggleBtn.addEventListener("click", () => {
    if (topTeam.classList.contains("red")) {
      topTeam.classList.remove("red");
      topTeam.classList.add("green");
    } else {
      topTeam.classList.remove("green");
      topTeam.classList.add("red");
    }
    if (bottomTeam.classList.contains("green")) {
      bottomTeam.classList.remove("green");
      bottomTeam.classList.add("red");
    } else {
      bottomTeam.classList.remove("red");
      bottomTeam.classList.add("green");
    }
    calculateResult();
  });

  bottomTeamToggleBtn.addEventListener("click", () => {
    if (bottomTeam.classList.contains("green")) {
      bottomTeam.classList.remove("green");
      bottomTeam.classList.add("red");
    } else {
      bottomTeam.classList.remove("red");
      bottomTeam.classList.add("green");
    }
    if (topTeam.classList.contains("red")) {
      topTeam.classList.remove("red");
      topTeam.classList.add("green");
    } else {
      topTeam.classList.remove("green");
      topTeam.classList.add("red");
    }
    calculateResult();
  });

  // Schoet-Knöpfe
  topSchoetBtn.addEventListener("click", () => {
    topSchoet++;
    topSchoetDisplay.textContent = topSchoet;
    calculateResult();
  });

  bottomSchoetBtn.addEventListener("click", () => {
    bottomSchoet++;
    bottomSchoetDisplay.textContent = bottomSchoet;
    calculateResult();
  });

  // Meter-Eingaben
  topMeterInput.addEventListener("input", calculateResult);
  bottomMeterInput.addEventListener("input", calculateResult);

  // Ergebnis-Berechnung
  function calculateResult() {
    let meterDiff = parseInt(topMeterInput.value) - parseInt(bottomMeterInput.value);
    let schoeetDiff = topSchoet - bottomSchoet;
    let gender = genderSelect.value;
    let threshold = (gender === "men") ? 150 : 100;

    let absMeterDiff = Math.abs(meterDiff);
    let extraSchoet = Math.floor(absMeterDiff / threshold);

    if (meterDiff > 0) {
      schoeetDiff += extraSchoet;
      meterDiff = meterDiff % threshold;
    } else if (meterDiff < 0) {
      schoeetDiff -= extraSchoet;
      let leftover = absMeterDiff % threshold;
      meterDiff = -leftover;
    }
    
    // Zusätzliche Anpassung:
    // - Wenn der untere Bereich grün ist und das Ergebnis positiv, -0,5 abziehen.
    // - Wenn der obere Bereich grün ist und das Ergebnis negativ, +0,5 addieren.
    if (bottomTeam.classList.contains("green") && schoeetDiff > 0) {
      schoeetDiff -= 0.5;
    } else if (topTeam.classList.contains("green") && schoeetDiff < 0) {
      schoeetDiff += 0.5;
    }
    
    // Ergebnisse formatieren:
    // - Schoet-Ergebnis mit 1 Kommastelle.
    // - Meter-Ergebnis als ganze Zahl.
    ergebnisSchoet.textContent = schoeetDiff.toFixed(1);
    ergebnisMeter.textContent = meterDiff.toFixed(0);
  }

  // Reset-Funktion
  resetBtn.addEventListener("click", () => {
    document.querySelectorAll('tbody input[type="text"]').forEach(input => {
      input.value = "";
    });
    document.querySelectorAll('tbody input[type="checkbox"]').forEach(checkbox => {
      checkbox.checked = false;
    });
    topSchoet = 0;
    bottomSchoet = 0;
    topSchoetDisplay.textContent = 0;
    bottomSchoetDisplay.textContent = 0;
    topMeterInput.value = 0;
    bottomMeterInput.value = 0;
    document.getElementById("topVerein").value = "";
    document.getElementById("bottomVerein").value = "";
    ergebnisSchoet.textContent = "0.0";
    ergebnisMeter.textContent = "0";
    genderSelect.value = "men";
    topTeam.classList.remove("green");
    topTeam.classList.add("red");
    bottomTeam.classList.remove("red");
    bottomTeam.classList.add("green");
  });
</script>
</body>
</html>